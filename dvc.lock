schema: '2.0'
stages:
  data_ingestion@movie_genre:
    cmd: python models/movie_genre/src/data_ingestion.py
    deps:
    - path: connections/mongo_connection.py
      hash: md5
      md5: 2abaf89c969ecc3b92cf0737b4832dd6
      size: 1616
    - path: models/movie_genre/src/data_ingestion.py
      hash: md5
      md5: 00b56d4509b8bf036a1e0b86d3ab6768
      size: 1805
    - path: params.yaml
      hash: md5
      md5: 02cef96a5733ecc860442c03825e5330
      size: 1111
    params:
      params.yaml:
        global.mongodb:
          database_name: capstone_db
          url_env_key: MONGODB_URL
        global.random_state: 42
        models.movie_genre.data_ingestion:
          collection_name: movie_genre
          test_size: 0.2
    outs:
    - path: data/movie_genre/raw
      hash: md5
      md5: adaa3969e7fca9267d2a3f206398cd60.dir
      size: 34696359
      nfiles: 2
  data_preprocessing@movie_genre:
    cmd: python models/movie_genre/src/data_preprocessing.py
    deps:
    - path: data/movie_genre/raw
      hash: md5
      md5: adaa3969e7fca9267d2a3f206398cd60.dir
      size: 34696359
      nfiles: 2
    - path: models/movie_genre/src/data_preprocessing.py
      hash: md5
      md5: 8e4dbc401923552ddab0ad8336e6c942
      size: 2903
    outs:
    - path: data/movie_genre/processed
      hash: md5
      md5: a0277e3b86bc37ad9ceed63dbc6b839d.dir
      size: 23326250
      nfiles: 2
  feature_engineering@movie_genre:
    cmd: python models/movie_genre/src/feature_engineering.py
    deps:
    - path: data/movie_genre/processed
      hash: md5
      md5: 9a1a11e05d51c51f7d96f2dce14e3056.dir
      size: 23329295
      nfiles: 2
    - path: models/movie_genre/src/feature_engineering.py
      hash: md5
      md5: 59db8eb4ec5d1c03a87e8a4e68a86e1e
      size: 3075
    params:
      params.yaml:
        models.movie_genre.feature_engineering:
          max_features: 6000
          ngram_range:
          - 1
          - 1
          min_df: 4
          max_df: 0.95
    outs:
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 495fbd7d6595018aef08b9ff757c8f0e
      size: 196668
    - path: data/movie_genre/features
      hash: md5
      md5: 3630b0e08b9e0548ebf2417ebfa2d722.dir
      size: 1335440686
      nfiles: 2
  model_training@movie_genre:
    cmd: python models/movie_genre/src/model_training.py
    deps:
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 495fbd7d6595018aef08b9ff757c8f0e
      size: 196668
    - path: data/movie_genre/features
      hash: md5
      md5: 3630b0e08b9e0548ebf2417ebfa2d722.dir
      size: 1335440686
      nfiles: 2
    - path: models/movie_genre/src/model_training.py
      hash: md5
      md5: 90eca7b94d1692601c26c7f72779ef27
      size: 2201
    params:
      params.yaml:
        models.movie_genre.model:
          type: linear_svm
          C: 0.6901505730083063
    outs:
    - path: artifacts/movie_genre/model.pkl
      hash: md5
      md5: 91a8779eb3d3932695015a92d58c56d7
      size: 1297073
  model_evaluation@movie_genre:
    cmd: python models/movie_genre/src/model_evaluation.py
    deps:
    - path: artifacts/movie_genre/model.pkl
      hash: md5
      md5: 91a8779eb3d3932695015a92d58c56d7
      size: 1297073
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 495fbd7d6595018aef08b9ff757c8f0e
      size: 196668
    - path: data/movie_genre/processed
      hash: md5
      md5: 9a1a11e05d51c51f7d96f2dce14e3056.dir
      size: 23329295
      nfiles: 2
    - path: models/movie_genre/src/model_evaluation.py
      hash: md5
      md5: cf01062e096954e9e67638f5495f45eb
      size: 5073
    outs:
    - path: reports/movie_genre/experiment_info.json
      hash: md5
      md5: 598234e2791ef322d2abdbf8ba36df11
      size: 177
    - path: reports/movie_genre/metrics.json
      hash: md5
      md5: 238fbd34266c135f1716737020ec07b9
      size: 294
  data_ingestion@fraud_detection:
    cmd: python models/fraud_detection/src/data_ingestion.py
    deps:
    - path: connections/mongo_connection.py
      hash: md5
      md5: 2abaf89c969ecc3b92cf0737b4832dd6
      size: 1616
    - path: models/fraud_detection/src/data_ingestion.py
      hash: md5
      md5: f5cfa2a60e06bfd9bb0208c7c3a2140c
      size: 6132
    - path: params.yaml
      hash: md5
      md5: 0b9944e53cc9ed187aa00d5ff75cb3f6
      size: 1108
    params:
      params.yaml:
        global.mongodb:
          database_name: capstone_db
          url_env_key: MONGODB_URL
        global.random_state: 42
        models.fraud_detection.data_ingestion:
          collection_name: fraud_transactions
    outs:
    - path: data/fraud_detection/raw
      hash: md5
      md5: 725f48bbfc10e8f840c8e4bb34aaf711.dir
      size: 84546410
      nfiles: 1
  data_preprocessing@fraud_detection:
    cmd: python models/fraud_detection/src/data_preprocessing.py
    deps:
    - path: data/fraud_detection/raw
      hash: md5
      md5: 725f48bbfc10e8f840c8e4bb34aaf711.dir
      size: 84546410
      nfiles: 1
    - path: models/fraud_detection/src/data_preprocessing.py
      hash: md5
      md5: 9c59f9a9fc4e6e7a1d4df18e33eec3be
      size: 3017
    outs:
    - path: data/fraud_detection/processed
      hash: md5
      md5: f0cc21a437e2b2af4914d8b6c01f00b9.dir
      size: 84551011
      nfiles: 1
  feature_engineering_no_vectorizer@fraud_detection:
    cmd: python models/fraud_detection/src/feature_engineering.py
    deps:
    - path: data/fraud_detection/processed
      hash: md5
      md5: f0cc21a437e2b2af4914d8b6c01f00b9.dir
      size: 84551011
      nfiles: 1
    - path: models/fraud_detection/src/feature_engineering.py
      hash: md5
      md5: baa7d6b4f0191ccbb9744acb6079b23a
      size: 7338
    params:
      params.yaml:
        models.fraud_detection.feature_engineering:
    outs:
    - path: data/fraud_detection/features
      hash: md5
      md5: 42e4c2df8f5cb0aff149f60c7e87a8b5.dir
      size: 57733007
      nfiles: 2
  model_training_no_vectorizer@fraud_detection:
    cmd: python models/fraud_detection/src/model_training.py
    deps:
    - path: data/fraud_detection/features
      hash: md5
      md5: 42e4c2df8f5cb0aff149f60c7e87a8b5.dir
      size: 57733007
      nfiles: 2
    - path: models/fraud_detection/src/model_training.py
      hash: md5
      md5: dfffc74caebf94f96285b0d776f2b7eb
      size: 2949
    params:
      params.yaml:
        models.fraud_detection.model:
          type: random_forest
          rf__n_estimators: 200
          rf__min_samples_leaf: 20
          rf__max_features: 0.5
          rf__max_depth:
          rf__bootstrap: false
    outs:
    - path: artifacts/fraud_detection/random_forest_fraud.joblib
      hash: md5
      md5: a2d3f87f0059d090bae19a570f1fd125
      size: 97949006
  model_evaluation_no_vectorizer@fraud_detection:
    cmd: python models/fraud_detection/src/model_evaluation.py
    deps:
    - path: artifacts/fraud_detection/random_forest_fraud.joblib
      hash: md5
      md5: a2d3f87f0059d090bae19a570f1fd125
      size: 97949006
    - path: data/fraud_detection/processed
      hash: md5
      md5: f0cc21a437e2b2af4914d8b6c01f00b9.dir
      size: 84551011
      nfiles: 1
    - path: models/fraud_detection/src/model_evaluation.py
      hash: md5
      md5: c5a20a1a6fb087cf90581adc79a80fbd
      size: 6027
    outs:
    - path: reports/fraud_detection/experiment_info.json
      hash: md5
      md5: e1e1cabe472c40b99e1adcecb0afa48a
      size: 224
    - path: reports/fraud_detection/metrics.json
      hash: md5
      md5: c8ad240f3a50b67dd84a1c1504f5468a
      size: 178
  data_ingestion@spam_sms:
    cmd: python models/spam_sms/src/data_ingestion.py
    deps:
    - path: connections/mongo_connection.py
      hash: md5
      md5: 2abaf89c969ecc3b92cf0737b4832dd6
      size: 1616
    - path: models/spam_sms/src/data_ingestion.py
      hash: md5
      md5: bbab38d5eac94591f7c8167dcc8e52ce
      size: 2267
    - path: params.yaml
      hash: md5
      md5: 02cef96a5733ecc860442c03825e5330
      size: 1111
    params:
      params.yaml:
        global.mongodb:
          database_name: capstone_db
          url_env_key: MONGODB_URL
        global.random_state: 42
        models.spam_sms.data_ingestion:
          collection_name: spam_csv
    outs:
    - path: data/spam_sms/raw
      hash: md5
      md5: 63132af951acd427092611099071937b.dir
      size: 483633
      nfiles: 1
  data_preprocessing@spam_sms:
    cmd: python models/spam_sms/src/data_preprocessing.py
    deps:
    - path: data/spam_sms/raw
      hash: md5
      md5: 63132af951acd427092611099071937b.dir
      size: 483633
      nfiles: 1
    - path: models/spam_sms/src/data_preprocessing.py
      hash: md5
      md5: 73819ec2d88516e21194dd89bf13fb23
      size: 3281
    outs:
    - path: data/spam_sms/processed
      hash: md5
      md5: 749c32d9f12e79cce2eae9428ea90a05.dir
      size: 277020
      nfiles: 1
  feature_engineering_with_vectorizer@movie_genre:
    cmd: python models/movie_genre/src/feature_engineering.py
    deps:
    - path: data/movie_genre/processed
      hash: md5
      md5: f6ac21b3e2a49713850dcd1c7147026c.dir
      size: 23329295
      nfiles: 2
    - path: models/movie_genre/src/feature_engineering.py
      hash: md5
      md5: 59db8eb4ec5d1c03a87e8a4e68a86e1e
      size: 3075
    params:
      params.yaml:
        models.movie_genre.feature_engineering:
          max_features: 6000
          ngram_range:
          - 1
          - 1
          min_df: 4
          max_df: 0.95
    outs:
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 6ea1089efb3dce6d7d453e89c6f5ac9f
      size: 196638
    - path: data/movie_genre/features
      hash: md5
      md5: 1f7b98d122b4df024e6c67680918e674.dir
      size: 1335443774
      nfiles: 2
  feature_engineering_with_vectorizer@spam_sms:
    cmd: python models/spam_sms/src/feature_engineering.py
    deps:
    - path: data/spam_sms/processed
      hash: md5
      md5: f919e10f7027157d49e1b39a02e4c4fe.dir
      size: 272315
      nfiles: 1
    - path: models/spam_sms/src/feature_engineering.py
      hash: md5
      md5: 908853ab77874dbf75f1160a39c4b019
      size: 5541
    params:
      params.yaml:
        models.spam_sms.feature_engineering:
          vocab_size: 10000
          max_len: 100
          test_size: 0.2
          random_state: 42
    outs:
    - path: artifacts/spam_sms/vectorizer.pkl
      hash: md5
      md5: 64fdd2d30472e2978abe85db3a0deec5
      size: 289363
    - path: data/spam_sms/features
      hash: md5
      md5: df6e8dd0bc363c6d9e3630d38e8cb193.dir
      size: 430228
      nfiles: 4
  model_training_movie_genre:
    cmd: python models/movie_genre/src/model_training.py
    deps:
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 1a7c7194a72565d310f1a068223d9c72
      size: 1636447
    - path: data/movie_genre/features
      hash: md5
      md5: e9fc06dab8fe10b89b37438eae9d486f.dir
      size: 1335452299
      nfiles: 2
    - path: models/movie_genre/src/model_training.py
      hash: md5
      md5: b4d3f7fbffe7586664cf66ae8eb10b0e
      size: 2204
    params:
      params.yaml:
        models.movie_genre.training:
          type: linear_svm
          C: 0.6901505730083063
    outs:
    - path: artifacts/movie_genre/model.pkl
      hash: md5
      md5: 85ae04fba61614dccabe8a2894de2507
      size: 1297073
  model_training_spam_sms:
    cmd: python models/spam_sms/src/model_training.py
    deps:
    - path: artifacts/spam_sms/tokenizer.json
      hash: md5
      md5: 6d8a45564a1e45efac0f5fae991134a8
      size: 626420
    - path: data/spam_sms/features
      hash: md5
      md5: 02b42647be8a78f329d6d8c85b7efb0c.dir
      size: 443570
      nfiles: 4
    - path: models/spam_sms/src/model_training.py
      hash: md5
      md5: 3329e7d79a9969c3156dcd11fdfe5f68
      size: 5076
    params:
      params.yaml:
        models.spam_sms.training:
          embed_dim: 128
          filters: 128
          kernel_sizes:
          - 3
          - 5
          - 7
          dropout_rate: 0.5
          l2_reg: 0.0001
          learning_rate: 0.001
          batch_size: 64
          epochs: 10
          val_split: 0.1
    outs:
    - path: artifacts/spam_sms/model
      hash: md5
      md5: 06518adb91c57cdf05120c8b5cf8f700.dir
      size: 14968317
      nfiles: 5
  model_evaluation_with_vectorizer@movie_genre:
    cmd: python models/movie_genre/src/model_evaluation.py
    deps:
    - path: artifacts/movie_genre/model.pkl
      hash: md5
      md5: 9eae847f9541fee7bb32c30c6eb6d055
      size: 1297073
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 6ea1089efb3dce6d7d453e89c6f5ac9f
      size: 196638
    - path: data/movie_genre/processed
      hash: md5
      md5: f6ac21b3e2a49713850dcd1c7147026c.dir
      size: 23329295
      nfiles: 2
    - path: models/movie_genre/src/model_evaluation.py
      hash: md5
      md5: 9b57af15db4db04c635e7fbeee312967
      size: 5073
    outs:
    - path: reports/movie_genre/experiment_info.json
      hash: md5
      md5: ff9473692b57dd12cb7e19b0499e07f1
      size: 177
  model_evaluation_movie_genre:
    cmd: python models/movie_genre/src/model_evaluation.py
    deps:
    - path: artifacts/movie_genre/model.pkl
      hash: md5
      md5: 85ae04fba61614dccabe8a2894de2507
      size: 1297073
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 1a7c7194a72565d310f1a068223d9c72
      size: 1636447
    - path: data/movie_genre/processed
      hash: md5
      md5: a0277e3b86bc37ad9ceed63dbc6b839d.dir
      size: 23326250
      nfiles: 2
    - path: models/movie_genre/src/model_evaluation.py
      hash: md5
      md5: 0004caa3d698b6dc91c2b8d343833a29
      size: 5139
    outs:
    - path: reports/movie_genre/experiment_info.json
      hash: md5
      md5: 33effbb30927cf5e1693241a970368b6
      size: 157
  model_evaluation_spam_sms:
    cmd: python models/spam_sms/src/model_evaluation.py
    deps:
    - path: artifacts/spam_sms/model
      hash: md5
      md5: 06518adb91c57cdf05120c8b5cf8f700.dir
      size: 14968317
      nfiles: 5
    - path: artifacts/spam_sms/tokenizer.json
      hash: md5
      md5: 6d8a45564a1e45efac0f5fae991134a8
      size: 626420
    - path: data/spam_sms/features
      hash: md5
      md5: 02b42647be8a78f329d6d8c85b7efb0c.dir
      size: 443570
      nfiles: 4
    - path: models/spam_sms/src/model_evaluation.py
      hash: md5
      md5: 6b1888a35b07d012d009ed885685ef34
      size: 6417
    outs:
    - path: reports/spam_sms/experiment_info.json
      hash: md5
      md5: bc6001a056ec9d9dbab9f02f3a768cc1
      size: 144
  model_registration@movie_genre:
    cmd: python models/movie_genre/src/register_model.py
    deps:
    - path: models/movie_genre/src/register_model.py
      hash: md5
      md5: 0abd51959309dd16d8007e6baf466f5b
      size: 4601
    - path: reports/movie_genre/experiment_info.json
      hash: md5
      md5: 33effbb30927cf5e1693241a970368b6
      size: 157
  model_registration@spam_sms:
    cmd: python models/spam_sms/src/register_model.py
    deps:
    - path: models/spam_sms/src/register_model.py
      hash: md5
      md5: 51b566e5ba481c436a8007797bdd9f82
      size: 3502
    - path: reports/spam_sms/experiment_info.json
      hash: md5
      md5: bc6001a056ec9d9dbab9f02f3a768cc1
      size: 144
  feature_engineering_movie_genre:
    cmd: python models/movie_genre/src/feature_engineering.py
    deps:
    - path: data/movie_genre/processed
      hash: md5
      md5: a0277e3b86bc37ad9ceed63dbc6b839d.dir
      size: 23326250
      nfiles: 2
    - path: models/movie_genre/src/feature_engineering.py
      hash: md5
      md5: 59db8eb4ec5d1c03a87e8a4e68a86e1e
      size: 3075
    params:
      params.yaml:
        models.movie_genre.feature_engineering:
          max_features: 6000
          ngram_range:
          - 1
          - 1
          min_df: 4
          max_df: 0.95
    outs:
    - path: artifacts/movie_genre/vectorizer.pkl
      hash: md5
      md5: 1a7c7194a72565d310f1a068223d9c72
      size: 1636447
    - path: data/movie_genre/features
      hash: md5
      md5: e9fc06dab8fe10b89b37438eae9d486f.dir
      size: 1335452299
      nfiles: 2
  feature_engineering_spam_sms:
    cmd: python models/spam_sms/src/feature_engineering.py
    deps:
    - path: data/spam_sms/processed
      hash: md5
      md5: 749c32d9f12e79cce2eae9428ea90a05.dir
      size: 277020
      nfiles: 1
    - path: models/spam_sms/src/feature_engineering.py
      hash: md5
      md5: 1d21774de6678a55ff217236b98413d3
      size: 5434
    params:
      params.yaml:
        models.spam_sms.feature_engineering:
          vocab_size: 10000
          max_len: 100
          test_size: 0.2
          random_state: 42
    outs:
    - path: artifacts/spam_sms/tokenizer.json
      hash: md5
      md5: 6d8a45564a1e45efac0f5fae991134a8
      size: 626420
    - path: data/spam_sms/features
      hash: md5
      md5: 02b42647be8a78f329d6d8c85b7efb0c.dir
      size: 443570
      nfiles: 4
